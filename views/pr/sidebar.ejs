<!-- Sidebar Desktop (visibile solo su desktop) -->
<div class="sidebar sidebar-desktop">
  <h2>PR Panel</h2>
  <ul>
    <li><a href="/pr/dashboard">Dashboard</a></li>
    <li><a href="/pr/prenotazioni">Prenotazioni Tavoli</a></li>
    <li><a href="/pr/tavoli">I Tuoi Tavoli</a></li>
    <li><a href="/pr/organigramma">Organigramma</a></li>
    <li><a href="/pr/provvigioni">Provvigioni</a></li>
    <% if (user && user.poteri) { %>
    <li><a href="/pr/richiesta-nuovo-pr">üöÄ Richiedi Nuovo PR</a></li>
    <% } %>
    <li><a href="/logout">Logout</a></li>
  </ul>
</div>

<!-- Header Mobile (visibile solo su mobile) -->
<div class="mobile-header">
  <div class="mobile-header-content">
    <h2>PR Panel</h2>
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  
  <!-- Menu dropdown mobile -->
  <div class="mobile-menu" id="mobileMenu">
    <ul>
      <li><a href="/pr/dashboard" onclick="closeMobileMenu()">üìä Dashboard</a></li>
      <li><a href="/pr/prenotazioni" onclick="closeMobileMenu()">üìÖ Prenotazioni Tavoli</a></li>
      <li><a href="/pr/tavoli" onclick="closeMobileMenu()">üçΩÔ∏è I Tuoi Tavoli</a></li>
      <li><a href="/pr/organigramma" onclick="closeMobileMenu()">üë• Organigramma</a></li>
      <li><a href="/pr/provvigioni" onclick="closeMobileMenu()">üí∞ Provvigioni</a></li>
      <% if (user && user.poteri) { %>
      <li><a href="/pr/richiesta-nuovo-pr" onclick="closeMobileMenu()">üöÄ Richiedi Nuovo PR</a></li>
      <% } %>
      <li><a href="/logout" onclick="closeMobileMenu()">üö™ Logout</a></li>
    </ul>
  </div>
</div>

<!-- Overlay per chiudere il menu mobile -->
<div class="mobile-overlay" onclick="closeMobileMenu()"></div>

<style>
/* Stili base - nasconde elementi mobile su desktop */
.mobile-header, .mobile-overlay {
  display: none;
}

/* Hamburger menu styling */
.mobile-menu-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 30px;
  height: 25px;
}

.mobile-menu-toggle span {
  display: block;
  height: 3px;
  width: 100%;
  background: white;
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* Animazione hamburger -> X */
.mobile-menu-toggle.active span:nth-child(1) {
  transform: rotate(45deg) translate(7px, 7px);
}

.mobile-menu-toggle.active span:nth-child(2) {
  opacity: 0;
}

.mobile-menu-toggle.active span:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Mobile styles */
@media (max-width: 768px) {
  /* Nascondi sidebar desktop */
  .sidebar-desktop {
    display: none !important;
  }
  
  /* Aggiusta body per mobile */
  body {
    padding-bottom: 3rem !important;
    min-height: 100vh;
    overflow-x: hidden;
  }
  
  /* Mostra header mobile */
  .mobile-header {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #2b6cb0;
    color: white;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    height: 70px; /* Altezza fissa */
  }
  
  .mobile-header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
  }
  
  .mobile-header h2 {
    margin: 0;
    font-size: 1.2rem;
    font-weight: 600;
  }
  
  /* Menu dropdown mobile */
  .mobile-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #2b6cb0;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }
  
  .mobile-menu.open {
    max-height: 400px;
  }
  
  .mobile-menu ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  .mobile-menu li {
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }
  
  .mobile-menu li:last-child {
    border-bottom: none;
  }
  
  .mobile-menu a {
    display: block;
    padding: 15px 20px;
    color: white;
    text-decoration: none;
    transition: background 0.2s;
    font-size: 1rem;
  }
  
  .mobile-menu a:hover {
    background: rgba(255,255,255,0.1);
  }
  
  /* Overlay */
  .mobile-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 999;
  }
  
  .mobile-overlay.active {
    display: block;
  }
  
  /* Aggiusta main content per mobile */
  .main-content {
    margin-left: 0 !important;
    margin-top: 70px; /* Pi√π spazio per header mobile */
    padding: 20px 15px 40px 15px; /* Aggiungi padding-bottom */
    min-height: calc(100vh - 70px); /* Assicura altezza minima */
    box-sizing: border-box;
  }
}
</style>

<script>
function toggleMobileMenu() {
  const menu = document.getElementById('mobileMenu');
  const overlay = document.querySelector('.mobile-overlay');
  const toggle = document.querySelector('.mobile-menu-toggle');
  
  menu.classList.toggle('open');
  overlay.classList.toggle('active');
  toggle.classList.toggle('active');
}

function closeMobileMenu() {
  const menu = document.getElementById('mobileMenu');
  const overlay = document.querySelector('.mobile-overlay');
  const toggle = document.querySelector('.mobile-menu-toggle');
  
  menu.classList.remove('open');
  overlay.classList.remove('active');
  toggle.classList.remove('active');
}

// Chiudi menu con ESC
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeMobileMenu();
  }
});
</script>
